# 🚀 加密货币实时监测系统

基于Python开发的**专业级**加密货币实时监测和技术分析系统，集成多种经典交易理论和技术指标。

## ✨ 核心特性

### v5.0 - 专业技术分析版（最新）⭐

🎓 **四大交易理论**
- **斐波那契分析** - 找出关键支撑阻力位
- **波浪理论** - 识别市场周期和趋势
- **缠论** - 精准买卖点识别
- **威科夫交易法** - 主力行为分析

📊 **六大技术指标**
- **MA均线** - 多周期趋势分析（5/10/20/30/60）
- **MACD** - 金叉死叉信号
- **KDJ** - 超买超卖判断
- **BOLL布林带** - 波动区间分析
- **RSI** - 相对强弱指标
- **ATR** - 波动率计算

💼 **专业交易建议**
- 综合评分系统（0-100分）
- 多时间周期预测（15分钟/1小时/4小时/24小时）
- 自动止盈止损位计算
- 风险收益比分析

🎮 **交互式控制**
- 按键切换实时/暂停模式
- 手动刷新数据
- 一键技术分析

⚡ **实时推送**
- 币安WebSocket实时数据
- 延迟 < 100ms
- 自动重连机制

## 📸 界面预览

```
================================================================================
                      >>> 加密货币智能监测系统 <<<
================================================================================

更新时间: 2025-10-31 23:45:30
数据源: 币安WebSocket + REST API
模式: 实时推送中

================================================================================

【BTC】
  当前价格:      $110,248.38
  24小时涨跌:    ▲ +2.39% (涨)
  24小时交易量:  $64,857,273,290
  24小时最高:    $111,190.00
  24小时最低:    $106,304.34
--------------------------------------------------------------------------------

【ETH】
  当前价格:      $3,865.16
  24小时涨跌:    ▲ +2.31% (涨)
  ...

================================================================================
简洁概览:
BTC: $110,248.38 (+2.39%) | ETH: $3,865.16 (+2.31%) | ...
================================================================================

控制面板:
  [空格] 切换实时/暂停模式  实时推送中
  [R]     手动刷新数据
  [A]     技术分析（获取历史数据）
  [Q]     退出程序
================================================================================
```

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 运行程序

#### Windows（推荐）

**交互式版本**（支持按键控制）：
```bash
启动交互式版本.bat
```

**原版本**（简单监控）：
```bash
启动应用.bat
```

#### Linux/Mac

```bash
# 交互式版本
python cli_app_interactive.py

# 原版本
python cli_app.py
```

## 🎮 按键控制

| 按键 | 功能 | 说明 |
|------|------|------|
| `空格` | 切换模式 | 实时推送 ↔ 暂停 |
| `R` | 手动刷新 | 获取最新数据 |
| `A` | 技术分析 | 获取历史数据+分析 |
| `Q` | 退出程序 | 安全退出 |
| `Ctrl+C` | 强制退出 | 紧急退出 |

## 📊 专业技术分析功能

按`A键`进入技术分析模式，获得专业的交易建议！

### 分析流程

```
[1/5] 获取K线数据（100根1小时K线）
[2/5] 计算技术指标（MA、MACD、KDJ、BOLL、RSI、ATR）
[3/5] 技术指标分析
[4/5] 交易理论分析（斐波那契、波浪、缠论、威科夫）
[5/5] 生成交易建议
```

### 分析报告示例

```
================================================================================
                    >>> 专业技术分析系统 <<<
================================================================================
分析理论：斐波那契、波浪理论、缠论、威科夫交易法
技术指标：MA、MACD、KDJ、BOLL、RSI、ATR
================================================================================

【综合评分】
  总分: 68.50/100
  • 技术指标: 3.50
  • 波浪理论: 0.40
  • 缠论: 0.60
  • 威科夫: 0.40

【交易建议】
  方向: 做多（买入）
  可信度: 中

【走势预测】
  15分钟: 上涨
  1小时: 上涨
  4小时: 震荡上涨
  24小时: 震荡

【止损位】
  15min: $109,800.00
  1h: $109,200.00
  4h: $108,500.00
  24h: $107,000.00

【止盈位】
  15min: $111,100.00
  1h: $112,500.00
  4h: $114,000.00
  24h: $116,500.00

【风险收益比】
  15min: 1.30:1
  1h: 2.00:1 ✅
  4h: 2.50:1 ✅
  24h: 3.00:1 ✅

【风险提示】
  • 本分析仅供参考，不构成投资建议
  • 请根据自身情况设置止损，控制风险
  • 市场有风险，投资需谨慎
```

### 技术理论应用

#### 斐波那契回调
- 识别支撑阻力位
- 计算入场点位
- 设置止盈目标

#### 波浪理论
- 判断市场周期
- 识别推动浪/调整浪
- 预测趋势延续

#### 缠论
- 笔和中枢识别
- 背驰信号判断
- 精准买卖点

#### 威科夫交易法
- 识别吸筹/派发
- 分析供需关系
- 跟随主力操作

## ⚙️ 配置说明

配置文件：`config/config.yaml`

```yaml
# 监测的币种列表
cryptocurrencies:
  - BTC
  - ETH
  - SOL
  - DOGE

# 币安配置
binance:
  ws_url: "wss://stream.binance.com:9443"
  api_url: "https://api.binance.com"
  symbol_map:
    BTC: "BTCUSDT"
    ETH: "ETHUSDT"
    SOL: "SOLUSDT"
    DOGE: "DOGEUSDT"
```

### 添加更多币种

1. 在`cryptocurrencies`列表中添加币种
2. 在`symbol_map`中添加对应的交易对映射

```yaml
cryptocurrencies:
  - BTC
  - ETH
  - BNB    # 新增

binance:
  symbol_map:
    BTC: "BTCUSDT"
    ETH: "ETHUSDT"
    BNB: "BNBUSDT"    # 新增映射
```

## 📁 项目结构

```
detection/
├── cli_app.py                   # 原版应用（简单监控）
├── cli_app_interactive.py       # 交互式版本（推荐）
├── test_kline.py                # K线测试脚本
├── requirements.txt             # 依赖包列表
├── 启动应用.bat                  # 启动原版
├── 启动交互式版本.bat            # 启动交互式版本
├── README.md                    # 本文档
├── 使用指南.md                  # 详细使用指南
├── 交互式版本说明.md            # 版本说明
├── config/
│   └── config.yaml             # 配置文件
├── src/
│   ├── binance_websocket.py    # WebSocket客户端
│   ├── binance_kline.py        # K线数据获取
│   └── config_loader.py        # 配置加载器
└── rules/
    └── technical_options.mdc   # 技术指标规划
```

## 🔧 技术栈

- **Python 3.7+**
- **WebSocket** - 实时数据推送
- **Requests** - REST API请求
- **Colorama** - 终端彩色输出
- **PyYAML** - 配置文件解析
- **NumPy** - 数值计算和技术指标

## 📚 文档

- [专业技术分析系统说明.md](专业技术分析系统说明.md) - ⭐ v5.0技术分析详解
- [使用指南.md](使用指南.md) - 完整使用说明
- [交互式版本说明.md](交互式版本说明.md) - v4.0版本详情
- [快速开始.md](快速开始.md) - WebSocket版本说明
- [bug修复说明.md](bug修复说明.md) - v4.0.1修复记录

## 🌐 数据来源

### 币安API

- **REST API**: `https://api.binance.com`
- **WebSocket**: `wss://stream.binance.com:9443`
- **文档**: [Binance API Docs](https://developers.binance.com/docs/binance-spot-api-docs)

### API端点

| 端点 | 用途 | 频率限制 |
|------|------|----------|
| `/api/v3/klines` | 获取K线历史数据 | 1200/分钟 |
| `/api/v3/ticker/24hr` | 获取24小时统计 | 1200/分钟 |
| WebSocket `@ticker` | 实时价格推送 | 无限制 |

## 💡 使用场景

### 场景1：实时监控
```
1. 启动交互式版本
2. 保持实时推送模式
3. 观察价格波动
```

### 场景2：间歇监控
```
1. 启动后按空格暂停
2. 需要时按R刷新
3. 节省系统资源
```

### 场景3：技术分析
```
1. 按A键进入分析
2. 查看历史K线数据
3. 观察价格趋势
4. （未来）查看技术指标
```

## 🐛 常见问题

### Q: Windows系统显示乱码？

**A**: 使用提供的`.bat`文件启动，或手动设置UTF-8编码：
```bash
chcp 65001
python cli_app_interactive.py
```

### Q: 键盘控制不工作？

**A**: 
- 确保是Windows系统（Linux/Mac不支持键盘控制）
- 点击终端窗口获取焦点
- 关闭中文输入法

### Q: WebSocket连接失败？

**A**:
1. 检查网络连接
2. 检查防火墙设置
3. 国内用户可能需要代理/VPN

### Q: 如何更改K线周期？

**A**: 修改 `cli_app_interactive.py` 中的 `perform_technical_analysis()` 函数：
```python
# 默认：1小时K线，24根
klines = kline_client.get_klines(trading_pair, "1h", 24)

# 改为：5分钟K线，288根（24小时）
klines = kline_client.get_klines(trading_pair, "5m", 288)
```

## 📈 更新日志

### v5.0 - 2025-10-31（最新）⭐
- ✅ **四大交易理论**：斐波那契、波浪理论、缠论、威科夫
- ✅ **六大技术指标**：MA、MACD、KDJ、BOLL、RSI、ATR
- ✅ **综合评分系统**：0-100分智能评分
- ✅ **多周期预测**：15分钟/1小时/4小时/24小时
- ✅ **止盈止损计算**：基于ATR和斐波那契
- ✅ **风险收益比**：自动计算风险收益比
- ✅ **专业交易建议**：综合分析给出操作建议

### v4.0.1 - 2025-10-31
- 🐛 修复暂停模式屏幕刷新bug
- ✨ 优化资源占用

### v4.0 - 2025-10-31
- ✅ 新增交互式控制
- ✅ 实时/暂停模式切换
- ✅ 手动刷新功能
- ✅ 技术分析入口
- ✅ K线历史数据获取

### v3.0 - 2025-10-30
- ✅ 切换到币安WebSocket
- ✅ 移除CoinGecko数据源
- ✅ 优化实时推送性能

### v2.0 - 2025-10-29
- ✅ 添加币安REST API
- ✅ 双数据源支持

### v1.0 - 2025-10-28
- ✅ 初始版本
- ✅ CoinGecko数据获取

## 🎯 路线图

### 已完成 ✅

- [x] 技术指标计算（MA、MACD、KDJ、BOLL、RSI、ATR）
- [x] 交易理论分析（斐波那契、波浪、缠论、威科夫）
- [x] 综合评分系统
- [x] 止盈止损计算
- [x] 多周期预测

### 即将到来

- [ ] 机器学习预测模型
- [ ] 回测系统
- [ ] 自动交易接口
- [ ] K线图ASCII显示
- [ ] 价格预警功能
- [ ] 策略优化工具
- [ ] 盈亏分析报告

## 📄 许可证

MIT License

## 🙏 致谢

- [Binance API](https://developers.binance.com/) - 数据来源
- [websocket-client](https://github.com/websocket-client/websocket-client) - WebSocket库
- [Colorama](https://github.com/tartley/colorama) - 终端彩色输出

---

## ⚠️ 重要声明

### 风险提示
- 本系统提供的分析仅供参考，不构成投资建议
- 数字货币市场高度波动，请谨慎投资
- 请根据自身风险承受能力设置止损
- 市场有风险，投资需谨慎

### 免责声明
- 用户应对自己的投资决策负责
- 开发者不对任何投资损失负责
- 请在法律允许的范围内使用本系统

---

**立即开始**：
```bash
启动交互式版本.bat
```

按`A键`获取专业技术分析和交易建议！📊💼

**详细文档**: [专业技术分析系统说明.md](专业技术分析系统说明.md)
