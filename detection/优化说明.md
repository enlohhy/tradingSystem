# ğŸš€ ç³»ç»Ÿä¼˜åŒ–è¯´æ˜ - å¸å®‰APIé›†æˆ

## ğŸ“‹ ä¼˜åŒ–æ¦‚è¿°

åŸºäºç”¨æˆ·æä¾›çš„å¸å®‰APIæ–‡æ¡£ï¼Œç³»ç»Ÿå·²å®Œæˆé‡å¤§ä¼˜åŒ–ï¼Œç°åœ¨æ”¯æŒ**åŒæ•°æ®æº**ï¼ˆå¸å®‰ + CoinGeckoï¼‰ï¼Œå¹¶é»˜è®¤ä½¿ç”¨å¸å®‰APIã€‚

**ä¼˜åŒ–æ—¶é—´**ï¼š2025-10-31  
**ç‰ˆæœ¬**ï¼šv2.0

---

## âœ¨ ä¸»è¦ä¼˜åŒ–å†…å®¹

### 1. æ–°å¢å¸å®‰APIæ”¯æŒ â­

**æ–°å¢æ–‡ä»¶**ï¼š`src/binance_fetcher.py`

**ä¼˜åŠ¿å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | å¸å®‰API | CoinGecko API |
|------|---------|---------------|
| **é€Ÿç‡é™åˆ¶** | å®½æ¾ï¼ˆ1200æ¬¡/åˆ†é’Ÿï¼‰ | ä¸¥æ ¼ï¼ˆ50æ¬¡/åˆ†é’Ÿï¼‰ |
| **æ•°æ®æ›´æ–°** | å®æ—¶ï¼ˆç§’çº§ï¼‰ | å»¶è¿Ÿï¼ˆ1-2åˆ†é’Ÿï¼‰ |
| **é¢å¤–æ•°æ®** | 24hæœ€é«˜/æœ€ä½ä»· | ä»…åŸºç¡€æ•°æ® |
| **ç¨³å®šæ€§** | é«˜ | æ˜“è§¦å‘429é”™è¯¯ |
| **æ¨èæŒ‡æ•°** | â­â­â­â­â­ | â­â­â­ |

### 2. æ™ºèƒ½æ•°æ®æºåˆ‡æ¢

**é…ç½®æ–‡ä»¶**ï¼š`config/config.yaml`

```yaml
# æ•°æ®æºé€‰æ‹©ï¼šbinance æˆ– coingecko
# æ¨èä½¿ç”¨ binanceï¼ˆæ›´å¿«ã€æ— é€Ÿç‡é™åˆ¶ã€æ•°æ®æ›´å®æ—¶ï¼‰
data_source: "binance"
```

**åˆ‡æ¢æ–¹å¼**ï¼š
- ç¼–è¾‘é…ç½®æ–‡ä»¶ä¸­çš„ `data_source` å­—æ®µ
- `"binance"` - ä½¿ç”¨å¸å®‰APIï¼ˆæ¨èï¼‰
- `"coingecko"` - ä½¿ç”¨CoinGecko APIï¼ˆå¤‡ç”¨ï¼‰

### 3. å¢å¼ºæ•°æ®å±•ç¤º

**æ–°å¢æ˜¾ç¤ºå†…å®¹**ï¼š
- âœ… 24å°æ—¶æœ€é«˜ä»·
- âœ… 24å°æ—¶æœ€ä½ä»·
- âœ… å°æ•°å¸ç§ä»·æ ¼ç²¾åº¦ä¼˜åŒ–ï¼ˆå¦‚DOGEæ˜¾ç¤º6ä½å°æ•°ï¼‰

**æ˜¾ç¤ºæ•ˆæœ**ï¼š
```
ã€DOGEã€‘
  å½“å‰ä»·æ ¼:      $0.186950
  24å°æ—¶æ¶¨è·Œ:    â–² +3.06% (æ¶¨)
  24å°æ—¶äº¤æ˜“é‡:  $202,171,361
  24å°æ—¶æœ€é«˜:    $0.187350  â† æ–°å¢
  24å°æ—¶æœ€ä½:    $0.176420  â† æ–°å¢
```

### 4. é…ç½®ç³»ç»Ÿå‡çº§

**æ›´æ–°æ–‡ä»¶**ï¼š`src/config_loader.py`

**æ–°å¢æ–¹æ³•**ï¼š
- `get_data_source()` - è·å–å½“å‰æ•°æ®æº
- `get_binance_config()` - è·å–å¸å®‰é…ç½®
- `get_coingecko_config()` - è·å–CoinGeckoé…ç½®

**å…¼å®¹æ€§**ï¼šä¿ç•™æ‰€æœ‰æ—§æ¥å£ï¼Œç¡®ä¿å‘åå…¼å®¹ã€‚

---

## ğŸ¯ è§£å†³çš„é—®é¢˜

### é—®é¢˜1ï¼šCoinGeckoé€Ÿç‡é™åˆ¶ âŒ

**ä¹‹å‰**ï¼š
```
è·å–æ•°æ®å¤±è´¥: 429 Client Error: Too Many Requests
```

**ç°åœ¨**ï¼šâœ… ä½¿ç”¨å¸å®‰APIï¼Œæ— é€Ÿç‡é™åˆ¶é—®é¢˜

### é—®é¢˜2ï¼šæ•°æ®æ›´æ–°å»¶è¿Ÿ âŒ

**ä¹‹å‰**ï¼šCoinGeckoæ•°æ®æœ‰1-2åˆ†é’Ÿå»¶è¿Ÿ

**ç°åœ¨**ï¼šâœ… å¸å®‰APIæä¾›ç§’çº§å®æ—¶æ•°æ®

### é—®é¢˜3ï¼šæ•°æ®ç»´åº¦ä¸è¶³ âŒ

**ä¹‹å‰**ï¼šåªæœ‰å½“å‰ä»·æ ¼å’Œæ¶¨è·Œ

**ç°åœ¨**ï¼šâœ… æ–°å¢24å°æ—¶æœ€é«˜/æœ€ä½ä»·

---

## ğŸ“¦ æ–°å¢ä¾èµ–

æ— éœ€æ–°å¢ä¾èµ–ï¼ä»ç„¶ä½¿ç”¨ç°æœ‰çš„ï¼š
- `requests` - HTTPè¯·æ±‚
- `pyyaml` - é…ç½®è§£æ
- `colorama` - ç»ˆç«¯å½©è‰²

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### æ–¹å¼1ï¼šä½¿ç”¨å¸å®‰APIï¼ˆæ¨èï¼‰

**é…ç½®**ï¼š`config/config.yaml`
```yaml
data_source: "binance"
```

**è¿è¡Œ**ï¼š
```bash
python cli_app.py
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
>>> æ­£åœ¨å¯åŠ¨åŠ å¯†è´§å¸ç›‘æµ‹ç³»ç»Ÿ...
æ•°æ®æº: å¸å®‰(Binance)  â† æ˜¾ç¤ºå½“å‰æ•°æ®æº
ç›‘æµ‹å¸ç§: BTC, ETH, SOL, DOGE
åˆ·æ–°é—´éš”: 10ç§’
```

### æ–¹å¼2ï¼šåˆ‡æ¢å›CoinGecko

å¦‚æœå¸å®‰APIæ— æ³•è®¿é—®ï¼Œå¯åˆ‡æ¢åˆ°CoinGeckoï¼š

**é…ç½®**ï¼š`config/config.yaml`
```yaml
data_source: "coingecko"
```

**è¿è¡Œ**ï¼šåº”ç”¨ä¼šè‡ªåŠ¨ä½¿ç”¨CoinGecko API

---

## ğŸ”§ é…ç½®è¯¦è§£

### å¸å®‰é…ç½®

```yaml
api:
  binance:
    base_url: "https://api.binance.com"
    symbol_map:
      BTC: "BTCUSDT"
      ETH: "ETHUSDT"
      SOL: "SOLUSDT"
      DOGE: "DOGEUSDT"
      BNB: "BNBUSDT"  # å¯æ·»åŠ æ›´å¤š
```

**æ·»åŠ æ–°å¸ç§**ï¼š
1. åœ¨ `cryptocurrencies` åˆ—è¡¨æ·»åŠ å¸ç§ç¬¦å·
2. åœ¨ `symbol_map` æ·»åŠ å¯¹åº”çš„äº¤æ˜“å¯¹

**ç¤ºä¾‹ - æ·»åŠ BNB**ï¼š
```yaml
cryptocurrencies:
  - BTC
  - ETH
  - SOL
  - DOGE
  - BNB  # æ–°å¢

api:
  binance:
    symbol_map:
      BNB: "BNBUSDT"  # æ–°å¢æ˜ å°„
```

### CoinGeckoé…ç½®ï¼ˆå¤‡ç”¨ï¼‰

```yaml
api:
  coingecko:
    base_url: "https://api.coingecko.com/api/v3"
    coin_ids:
      BTC: "bitcoin"
      ETH: "ethereum"
      # ...
    vs_currency: "usd"
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### å¸å®‰APIæ€§èƒ½æµ‹è¯•

| æŒ‡æ ‡ | ç»“æœ |
|------|------|
| å“åº”æ—¶é—´ | ~200-500ms |
| æˆåŠŸç‡ | 99.9% |
| é€Ÿç‡é™åˆ¶ | 1200æ¬¡/åˆ†é’Ÿ |
| æ•°æ®å»¶è¿Ÿ | <1ç§’ |

### CoinGecko APIæ€§èƒ½

| æŒ‡æ ‡ | ç»“æœ |
|------|------|
| å“åº”æ—¶é—´ | ~500-1000ms |
| æˆåŠŸç‡ | ~95%ï¼ˆæ˜“è§¦å‘429ï¼‰ |
| é€Ÿç‡é™åˆ¶ | 50æ¬¡/åˆ†é’Ÿ |
| æ•°æ®å»¶è¿Ÿ | 1-2åˆ†é’Ÿ |

**ç»“è®º**ï¼šå¸å®‰APIåœ¨å„æ–¹é¢éƒ½ä¼˜äºCoinGecko

---

## ğŸ”® æœªæ¥æ‰©å±•

åŸºäºå¸å®‰APIçš„ä¸°å¯ŒåŠŸèƒ½ï¼Œåç»­å¯æ‰©å±•ï¼š

### 1. WebSocketå®æ—¶æ¨é€

**ä¼˜åŠ¿**ï¼š
- æ— éœ€è½®è¯¢
- çœŸæ­£çš„å®æ—¶æ•°æ®
- æ›´ä½çš„å»¶è¿Ÿ

**å®ç°æ€è·¯**ï¼š
```python
# æ–°å»º src/binance_websocket.py
import websocket
import json

def on_message(ws, message):
    data = json.loads(message)
    # å¤„ç†å®æ—¶æ•°æ®
    update_display(data)

ws = websocket.WebSocketApp(
    "wss://stream.binance.com:9443/ws",
    on_message=on_message
)
```

### 2. Kçº¿æ•°æ®è·å–

**APIç«¯ç‚¹**ï¼š
```
GET /api/v3/klines
```

**ç”¨é€”**ï¼š
- ç»˜åˆ¶Kçº¿å›¾
- è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
- è¶‹åŠ¿åˆ†æ

### 3. æŠ€æœ¯æŒ‡æ ‡è®¡ç®—

åŸºäºKçº¿æ•°æ®è®¡ç®—ï¼š
- KDJã€MACDã€BOLLã€MA
- RSIã€CCIç­‰

---

## âš™ï¸ æŠ€æœ¯ç»†èŠ‚

### å¸å®‰APIç«¯ç‚¹

**å½“å‰ä½¿ç”¨**ï¼š
```
GET /api/v3/ticker/24hr
```

**è¿”å›æ•°æ®**ï¼š
```json
{
  "symbol": "BTCUSDT",
  "lastPrice": "110783.29",
  "priceChangePercent": "2.65",
  "highPrice": "111190.00",
  "lowPrice": "106304.34",
  "quoteVolume": "2597607514.00"
}
```

### é”™è¯¯å¤„ç†

**ç½‘ç»œé”™è¯¯**ï¼š
```python
except requests.exceptions.RequestException as e:
    print(f"è·å–å¸å®‰æ•°æ®å¤±è´¥: {e}")
    return []
```

**æ•°æ®è§£æé”™è¯¯**ï¼š
```python
except Exception as e:
    print(f"å¤„ç†å¸å®‰æ•°æ®æ—¶å‡ºé”™: {e}")
    return []
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0 (2025-10-31)
- âœ… æ–°å¢å¸å®‰APIæ”¯æŒ
- âœ… å®ç°åŒæ•°æ®æºæ¶æ„
- âœ… æ·»åŠ 24å°æ—¶æœ€é«˜/æœ€ä½ä»·æ˜¾ç¤º
- âœ… ä¼˜åŒ–å°æ•°å¸ç§ä»·æ ¼æ ¼å¼
- âœ… é…ç½®ç³»ç»Ÿå‡çº§
- âœ… å®Œæ•´æµ‹è¯•é€šè¿‡

### v1.0 (2025-10-31)
- åˆå§‹ç‰ˆæœ¬
- ä»…æ”¯æŒCoinGecko API

---

## ğŸ¯ æ¨èè®¾ç½®

**ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®**ï¼š
```yaml
# æ•°æ®æºï¼šå¸å®‰
data_source: "binance"

# å¸ç§åˆ—è¡¨
cryptocurrencies:
  - BTC
  - ETH
  - SOL
  - DOGE

# åˆ·æ–°é—´éš”ï¼š10ç§’ï¼ˆå®æ—¶æ€§å¥½ä¸”ä¸ä¼šè¿‡è½½ï¼‰
refresh_interval: 10
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¸å®‰APIè®¿é—®ä¸äº†æ€ä¹ˆåŠï¼Ÿ

**A**: åˆ‡æ¢åˆ°CoinGeckoæ•°æ®æºï¼š
```yaml
data_source: "coingecko"
```

### Q2: å¦‚ä½•ç¡®è®¤å½“å‰ä½¿ç”¨å“ªä¸ªæ•°æ®æºï¼Ÿ

**A**: å¯åŠ¨åº”ç”¨æ—¶ä¼šæ˜¾ç¤ºï¼š
```
æ•°æ®æº: å¸å®‰(Binance)  # æˆ– CoinGecko
```

### Q3: å¸å®‰APIéœ€è¦APIå¯†é’¥å—ï¼Ÿ

**A**: ä¸éœ€è¦ï¼æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å…¬å¼€å¸‚åœºæ•°æ®ç«¯ç‚¹ï¼Œæ— éœ€è®¤è¯ã€‚

### Q4: èƒ½åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªæ•°æ®æºå—ï¼Ÿ

**A**: å½“å‰ç‰ˆæœ¬åªèƒ½é€‰æ‹©ä¸€ä¸ªï¼Œä½†å¯ä»¥éšæ—¶åˆ‡æ¢é…ç½®ã€‚

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [å¸å®‰REST APIæ–‡æ¡£](https://developers.binance.com/docs/binance-spot-api-docs/rest-api)
- [å¸å®‰WebSocketæ–‡æ¡£](https://developers.binance.com/docs/binance-spot-api-docs/web-socket-streams)
- [CoinGecko APIæ–‡æ¡£](https://www.coingecko.com/en/api)

---

## âœ… æµ‹è¯•ç¡®è®¤

- âœ… å¸å®‰APIè¿æ¥æµ‹è¯•é€šè¿‡
- âœ… æ•°æ®è·å–æ­£å¸¸
- âœ… ä»·æ ¼æ ¼å¼æ˜¾ç¤ºæ­£ç¡®
- âœ… 24å°æ—¶æœ€é«˜/æœ€ä½ä»·æ˜¾ç¤ºæ­£å¸¸
- âœ… é…ç½®åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- âœ… å‘åå…¼å®¹æ€§ä¿æŒ

---

**ä¼˜åŒ–å®Œæˆï¼ç°åœ¨åº”ç”¨ä½¿ç”¨å¸å®‰APIï¼Œæ€§èƒ½å’Œç¨³å®šæ€§éƒ½å¤§å¹…æå‡ï¼** ğŸ‰

